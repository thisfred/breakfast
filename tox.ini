# Tox (http://tox.testrun.org/) is a tool for running tests
# in multiple virtualenvs. This configuration file will run the
# test suite on all supported python versions. To use it, "pip install tox"
# and then run "tox" from this directory.

[tox]
skip_install = false

[testenv:test]
extras = tests
commands =
    coverage run --parallel -m pytest -rf -l -s -vv -x tests {posargs}
    coverage run --parallel -m pytest -rf -l -s -vv -x vim/ftplugin/python/test_vim_breakfast.py {posargs}
    flake8 --max-complexity=10 breakfast tests vim
    black --check setup.py breakfast tests vim
    isort -rc --check-only setup.py breakfast tests vim
    mypy breakfast
    mypy vim/ftplugin/python
    coverage combine
    coverage report -m --skip-covered --include='breakfast*,tests*,vim*'

[testenv:lint]
deps = pre-commit
skip_install = true
commands =
    pre-commit run --all-files

[testenv:docs]
extras = tests
commands =
    python -m doctest README.md
